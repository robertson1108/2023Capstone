---
title: "Sample POV Data Review"
author: "Jamie Robertson"
output:
  html_document: default
date: 'Jan. 2023'
subtitle: Capstone

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
options(show.signif.stars = FALSE)
library(knitr)
library(readr)
library(mosaic)
#library(effects)
library(car)


library(tidyverse,warn.conflicts = F)
library(tidymodels,warn.conflicts = F)
library(lubridate,warn.conflicts = F)
library(tidyr)
knitr::opts_chunk$set(echo = TRUE)
```


The data source: Poverello Center
Data dictionary for HMIS data: https://files.hudexchange.info/resources/documents/HMIS-Data-Dictionary.pdf


```{r}
#Read in the data

d.soup <- read_csv("C:\\Users\\jamie\\OneDrive\\Documents\\Capstone\\EmergencyShelter-FoodTransactions.csv")

d.service <- read_csv("C:\\Users\\jamie\\OneDrive\\Documents\\Capstone\\serve_count.csv")

#d.hmis <- read_csv("C:\\Users\\jamie\\OneDrive\\Documents\\Capstone\\SampleData-EmergencyShelter.csv")

```



Assumptions in the data, need to confirm 1&2 in Pov: 
1. d.soup is data collected The Pov
2. d.hmis is data collected by HMIS
3. Client ID is a primary key that can tie the data together. 

Assumptions for LR:
1. independence
2. linearity of relationship
3. multicollinearity effects checked for
4. equal variance and normality of residuals
5. no influential points 


#Exploring the data
Looking at the first 6 rows of each database. 

```{r, include=FALSE}

head(d.hmis)


```




```{r}
head(d.soup)
```

n_distinct(d.hmis$`Client ID`, na.rm = FALSE)
# 407

n_distinct(d.soup$'Client ID', na.rm = FALSE)
# 1488

```{r}

n_distinct(d.hmis$`Client ID`, na.rm = FALSE)


n_distinct(d.soup$'Client ID', na.rm = FALSE)


```

Here, I am going to only variables of interest in and and pull them in as factors

```{r}

d <-
  d.soup %>%
  mutate(
    Gender = factor(Gender...6)) %>% 
  mutate(
    race = factor(`Primary Race...7`)) %>%
  mutate(
    dv = factor(`Domestic Violence Victim or Survivor`)) %>%
  mutate(
    insured = factor(`Covered by Health Insurance` )) %>%
  mutate(
    dc = factor(`Disabling Condition`)) %>%
  mutate(
    dvo = factor(d.soup$`Length of Stay`)) %>%
  mutate(
    lessthan7 = factor(d.soup$`Did you stay less than 7 nights?`)) %>%
  mutate(
    lessthan90 = factor(d.soup$`Did you stay less than 90 days?`)) %>% 
  #mi == d.soup$`Total Monthly Income` %>%
  mutate( 
    ethnicity = factor(d.soup$`Ethnicity`)) %>%
  mutate(
    secrace = factor(d.soup$`Secondary Race`)) %>%
  mutate( 
    income = factor(d.soup$`Income from Any Source`)) %>%
  mutate(
    bene = factor(d.soup$`Non-cash benefit from any source`)) %>%
  mutate(
    sitch = factor(d.soup$`Prior Living Situation`)) %>%
  mutate(
    plS = factor(d.soup$`Prior Living Situation`))
  
  



```




Description has two factors, Food or Basic Needs. Most individuals are receiving food. 
Same Provider Creating for all entries

Primary race has 9 factors

Domestic Violence Victim or Survivor has 6 factors

Client location is the same for all entries or NA. 

Covered by Health Insurance has 6 variables.

Disabling Condition has 6 factors.

There are 8 factors for When dv experience occured.


There are 6 factors in currently fleeing dv. 

  Length of stay is categorical with 10 categories.
 
  Did you stay less than 7 nights has yes, no, na. 
`
    Did you stay less than 90 days has yes, no, na. 

On the night before did you stay on the streets, ES or SH has yes, no, na. 

Relationship to head of household has 7 factors but responses are primarily Self, distantly followed by NA. 

Total monthly income is the only natively quantitative variable. 

There are 24362 full dob's reported according to Date of Birth Type. 

Ethnicity is 6 factors for Hispanic/Non-Hispanic

The gender field is duplicated. 
Race field duplicated. 

Secondary race has the same fields as race.

Income from any source is a yes or no question. 

`Non-cash benefit from any source` is a yes or no question

```{r}

d.service %>%
  pull(service_count) %>%
  summary()


```

