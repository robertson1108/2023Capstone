---
title: "Sample POV Data Review"
author: "Jamie Robertson"
output:
  html_document: default
date: 'Jan. 2023'
subtitle: Capstone

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
options(show.signif.stars = FALSE)
library(knitr)
library(readr)
library(mosaic)
#library(effects)
library(car)


library(tidyverse,warn.conflicts = F)
library(tidymodels,warn.conflicts = F)
library(lubridate,warn.conflicts = F)
library(tidyr)
knitr::opts_chunk$set(echo = TRUE)
```


The data source: Poverello Center
Data dictionary for HMIS data: https://files.hudexchange.info/resources/documents/HMIS-Data-Dictionary.pdf


```{r}
#Read in the data

d.soup <- read_csv("C:\\Users\\jamie\\OneDrive\\Documents\\Capstone\\SampleData-SoupKitchen.csv")

d.hmis <- read_csv("C:\\Users\\jamie\\OneDrive\\Documents\\Capstone\\SampleData-EmergencyShelter.csv")

```



Assumptions in the data, need to confirm 1&2 in Pov: 
1. d.soup is data collected The Pov
2. d.hmis is data collected by HMIS
3. Client ID is a primary key that can tie the data together. 

Assumptions for LR:
1. independence
2. linearity of relationship
3. multicollinearity effects checked for
4. equal variance and normality of residuals
5. no influential points 


#Exploring the data
Looking at the first 6 rows of each database. 

```{r, include=FALSE}

head(d.hmis)


```




```{r}
head(d.soup)
```

n_distinct(d.hmis$`Client ID`, na.rm = FALSE)
# 407

n_distinct(d.soup$'Client ID', na.rm = FALSE)
# 1488

```{r}

n_distinct(d.hmis$`Client ID`, na.rm = FALSE)


n_distinct(d.soup$'Client ID', na.rm = FALSE)


```

Here, I am going to only variables of interest in and and pull them in as factors

```{r}

d <-
  d.soup %>%
  mutate(
    Gender = factor(Gender...6)) %>% 
  mutate(
    race = factor(`Primary Race...7`)) %>%
  mutate(
    dv = factor(`Domestic Violence Victim or Survivor`)) %>%
  mutate(
    insured = factor(`Covered by Health Insurance` )) %>%
  mutate(
    dc = factor(`Disabling Condition`)) %>%
  mutate(
    dvo = factor(d.soup$`Length of Stay`)) %>%
  mutate(
    lessthan7 = factor(d.soup$`Did you stay less than 7 nights?`)) %>%
  mutate(
    lessthan90 = factor(d.soup$`Did you stay less than 90 days?`)) %>% 
  #mi == d.soup$`Total Monthly Income` %>%
  mutate( 
    ethnicity = factor(d.soup$`Ethnicity`)) %>%
  mutate(
    secrace = factor(d.soup$`Secondary Race`)) %>%
  mutate( 
    income = factor(d.soup$`Income from Any Source`)) %>%
  mutate(
    bene = factor(d.soup$`Non-cash benefit from any source`)) %>%
  mutate(
    sitch = factor(d.soup$`Prior Living Situation`)) %>%
  mutate(
    plS = factor(d.soup$`Prior Living Situation`))
  
  



```




```{r}
#d <-
#  d.soup %>%
#  mutate(
#    Gender = factor(Gender...6)
#  )

d %>%
  pull(Gender) %>%
  summary()
```

```{r}

d <-
  d.soup %>%
  mutate(
    Description.f = factor(Description))
d %>%
  pull(Description.f) %>%
  summary()
```

Description has two factors, Food or Basic Needs. Most individuals are receiving food. 


```{r}
d <-
  d.soup %>%
  mutate(
    Description.f = factor(Description))
d %>%
  pull(Description.f) %>%
  summary()
```
Same Provider Creating for all entries

```{r}
d <-
  d.soup %>%
  mutate(
    race = factor(`Primary Race...7`))
d %>%
  pull(race) %>%
  summary()
```

Primary race has 9 factors


```{r}
d <-
  d.soup %>%
  mutate(
    dv = factor(`Domestic Violence Victim or Survivor`))
d %>%
  pull(dv) %>%
  summary()
```

Domestic Violence Victim or Survivor has 6 factors

```{r}
d <-
  d.soup %>%
  mutate(
    location = factor(`Client Location`))
d %>%
  pull(location) %>%
  summary()

```

Client location is the same for all entries or NA. 

```{r}
d <-
  d.soup %>%
  mutate(
    insured = factor(`Covered by Health Insurance` ))
d %>%
  pull(insured) %>%
  summary()
```

Covered by Health Insurance has 6 variables.

```{r}
d <-
  d.soup %>%
  mutate(
    dc = factor(`Disabling Condition`))
d %>%
  pull(dc) %>%
  summary()
```

Disabling Condition has 6 factors.


```{r}
d <-
  d.soup %>%
  mutate(
    dvo = factor(d.soup$`If yes for Domestic violence victim/survivor, when experience occurred`))
d %>%
  pull(dvo) %>%
  summary()
```

There are 8 factors for When dv experience occured.

```{r}

d <-
  d.soup %>%
  mutate(
    fdv = factor(d.soup$`If yes for Domestic Violence Victim/Survivor, are you currently fleeing?`))
d %>%
  pull(fdv) %>%
  summary()

```


There are 6 factors in currently fleeing dv. 

```{r}
d <-
  d.soup %>%
  mutate(
    dvo = factor(d.soup$`Length of Stay`))
d %>%
  pull(dvo) %>%
  summary()


```
  
  Length of stay is categorical with 10 categories.
  
```{r}

d <-
  d.soup %>%
  mutate(
    lessthan7 = factor(d.soup$`Did you stay less than 7 nights?`))
d %>%
  pull(lessthan7) %>%
  summary()

```
  
  Did you stay less than 7 nights has yes, no, na. 
  
```{r}


d <-
  d.soup %>%
  mutate(
    lessthan90 = factor(d.soup$`Did you stay less than 90 days?`))
d %>%
  pull(lessthan90) %>%
  summary()

```
  
    Did you stay less than 90 days has yes, no, na. 


```{r}

d <-
  d.soup %>%
  mutate(
    nightbefore = factor(d.soup$`On the night before did you stay on the streets, ES or SH?`))
d %>%
  pull(nightbefore) %>%
  summary()
```

On the night before did you stay on the streets, ES or SH has yes, no, na. 


```{r}

d <-
  d.soup %>%
  mutate(
    HoH = factor(d.soup$`Relationship to Head of Household`))
d %>%
  pull(HoH) %>%
  summary()
```


Relationship to head of household has 7 factors but responses are primarily Self, distantly followed by NA. 

```{r}
summary(d.soup$`Total Monthly Income`)
```

Total monthly income is the only natively quantitative variable. 

```{r}

d <-
  d.soup %>%
  mutate(
    dobt = factor(d.soup$`Date of Birth Type`))
d %>%
  pull(dobt) %>%
  summary()

```

There are 24362 full dob's reported according to Date of Birth Type. 


```{r}
d <-
  d.soup %>%
  mutate(
    ethnicity = factor(d.soup$`Ethnicity`))
d %>%
  pull(ethnicity) %>%
  summary()

```

Ethnicity is 6 factors for Hispanic/Non-Hispanic

```{r}
d <-
  d.soup %>%
  mutate(
    gend = factor(d.soup$`Gender...27`))
d %>%
  pull(gend) %>%
  summary()

```

The gender field is duplicated. 
```{r}

d <-
  d.soup %>%
  mutate(
    race = factor(d.soup$`Primary Race...28`))
d %>%
  pull(race) %>%
  summary()

```

Race field duplicated. 

```{r}
d <-
  d.soup %>%
  mutate(
    secrace = factor(d.soup$`Secondary Race`))
d %>%
  pull(secrace) %>%
  summary()
```
Secondary race has the same fields as race.

```{r}
d <-
  d.soup %>%
  mutate(
    income = factor(d.soup$`Income from Any Source`))
d %>%
  pull(income) %>%
  summary()

```

Income from any source is a yes or no question. 

```{r}

d <-
  d.soup %>%
  mutate(
    bene = factor(d.soup$`Non-cash benefit from any source`))
d %>%
  pull(bene) %>%
  summary()
```

`Non-cash benefit from any source` is a yes or no question

```{r}
d <-
  d.soup %>%
  mutate(
    plS = factor(d.soup$`Prior Living Situation`))
d %>%
  pull(pls) %>%
  summary()


```

